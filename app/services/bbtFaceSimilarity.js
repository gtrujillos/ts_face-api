var a5_0x2fa2=['readFileSync','toString','locationResult:','Socket','192.168.0.104','write','<EOF>','data','Received:\x20','destroy','close','Connection\x20closed','error','__awaiter','next','throw','value','apply','__importStar','__esModule','hasOwnProperty','call','default','defineProperty','face-api.js','../commons','net','fs-extra','/Users/admin/Documents/Projects/PassControl/Development/passcontrol.client_app/media/files/','current_driver.jpg','loadFromDisk','../weights','nets','faceLandmark68Net','loadImage','catch','computeFaceDescriptor','detectAllFaces','canvas','faceDetectionOptions','utils','euclideanDistance','slice','prototype','length','log','(no\x20reference\x20face)','(no\x20query\x20face)','(no\x20match)','(match)','/Users/admin/Documents/Projects/PassControl/Development/passcontrol.client_app/media/files/location.txt','existsSync','parse'];(function(_0x231bb0,_0x24f874){var _0x5ec2e0=function(_0x48e3f8){while(--_0x48e3f8){_0x231bb0['push'](_0x231bb0['shift']());}};_0x5ec2e0(++_0x24f874);}(a5_0x2fa2,0x116));var a5_0x3a48=function(_0x5b66e4,_0x301229){_0x5b66e4=_0x5b66e4-0x0;var _0x260b04=a5_0x2fa2[_0x5b66e4];return _0x260b04;};'use strict';var __awaiter=this&&this[a5_0x3a48('0x0')]||function(_0x10f433,_0xcc0903,_0x373b7e,_0x19636d){function _0x55431d(_0xbb6c19){return _0xbb6c19 instanceof _0x373b7e?_0xbb6c19:new _0x373b7e(function(_0x18b8d0){_0x18b8d0(_0xbb6c19);});}return new(_0x373b7e||(_0x373b7e=Promise))(function(_0x5ccd45,_0x213018){function _0x5c7174(_0x4446b3){try{_0x4a8277(_0x19636d[a5_0x3a48('0x1')](_0x4446b3));}catch(_0x1588e3){_0x213018(_0x1588e3);}}function _0x4e9311(_0x338e08){try{_0x4a8277(_0x19636d[a5_0x3a48('0x2')](_0x338e08));}catch(_0x3d0e16){_0x213018(_0x3d0e16);}}function _0x4a8277(_0x1cd167){_0x1cd167['done']?_0x5ccd45(_0x1cd167[a5_0x3a48('0x3')]):_0x55431d(_0x1cd167[a5_0x3a48('0x3')])['then'](_0x5c7174,_0x4e9311);}_0x4a8277((_0x19636d=_0x19636d[a5_0x3a48('0x4')](_0x10f433,_0xcc0903||[]))['next']());});};var __importStar=this&&this[a5_0x3a48('0x5')]||function(_0x11ab70){if(_0x11ab70&&_0x11ab70[a5_0x3a48('0x6')])return _0x11ab70;var _0x2ae1d9={};if(_0x11ab70!=null)for(var _0x2064d1 in _0x11ab70)if(Object[a5_0x3a48('0x7')][a5_0x3a48('0x8')](_0x11ab70,_0x2064d1))_0x2ae1d9[_0x2064d1]=_0x11ab70[_0x2064d1];_0x2ae1d9[a5_0x3a48('0x9')]=_0x11ab70;return _0x2ae1d9;};Object[a5_0x3a48('0xa')](exports,a5_0x3a48('0x6'),{'value':!![]});const faceapi=__importStar(require(a5_0x3a48('0xb')));const commons_1=require(a5_0x3a48('0xc'));const net=require(a5_0x3a48('0xd'));const fsExtra=require(a5_0x3a48('0xe'));const folder=a5_0x3a48('0xf');const REFERENCE_IMAGE=folder+'authorized_driver.jpg';const QUERY_IMAGE=folder+a5_0x3a48('0x10');const threshold=0.6;let previousResult='0';let countResult=0x0;function init(){return __awaiter(this,void 0x0,void 0x0,function*(){yield commons_1['faceDetectionNet'][a5_0x3a48('0x11')](a5_0x3a48('0x12'));yield faceapi[a5_0x3a48('0x13')][a5_0x3a48('0x14')][a5_0x3a48('0x11')](a5_0x3a48('0x12'));yield faceapi[a5_0x3a48('0x13')]['faceRecognitionNet'][a5_0x3a48('0x11')](a5_0x3a48('0x12'));setInterval(()=>{run();},0x3e8);});}function run(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2e1d0e=yield commons_1['canvas'][a5_0x3a48('0x15')](REFERENCE_IMAGE)[a5_0x3a48('0x16')](function(_0x3adbd4){});const _0x1ac61c=yield faceapi[a5_0x3a48('0x17')](_0x2e1d0e);const _0x455447=yield faceapi[a5_0x3a48('0x18')](_0x2e1d0e,commons_1['faceDetectionOptions']);const _0x6c4f6b=yield commons_1[a5_0x3a48('0x19')][a5_0x3a48('0x15')](QUERY_IMAGE)[a5_0x3a48('0x16')](function(_0x530939){});const _0x832422=yield faceapi[a5_0x3a48('0x17')](_0x6c4f6b);const _0x472111=yield faceapi[a5_0x3a48('0x18')](_0x6c4f6b,commons_1[a5_0x3a48('0x1a')]);const _0x19a3e0=faceapi[a5_0x3a48('0x1b')]['round'](faceapi[a5_0x3a48('0x1c')](Array['prototype'][a5_0x3a48('0x1d')][a5_0x3a48('0x8')](_0x1ac61c),Array[a5_0x3a48('0x1e')][a5_0x3a48('0x1d')][a5_0x3a48('0x8')](_0x832422)));let _0x23501c='0';if(_0x455447[a5_0x3a48('0x1f')]==0x0){console[a5_0x3a48('0x20')](a5_0x3a48('0x21'),new Date(),_0x19a3e0);}else if(_0x472111[a5_0x3a48('0x1f')]==0x0){console[a5_0x3a48('0x20')](a5_0x3a48('0x22'),new Date(),_0x19a3e0);}else{if(_0x19a3e0>threshold){console[a5_0x3a48('0x20')](a5_0x3a48('0x23'),new Date(),_0x19a3e0);}else{console[a5_0x3a48('0x20')](a5_0x3a48('0x24'),new Date(),_0x19a3e0);_0x23501c='1';}}if(_0x23501c==previousResult){countResult++;}else{countResult=0x0;}previousResult=_0x23501c;console[a5_0x3a48('0x20')]('result',_0x23501c,countResult);if(countResult==0x5){sendFaceResult(_0x23501c);const _0x5e5b6d=a5_0x3a48('0x25');let _0x58a27e='';if(fsExtra[a5_0x3a48('0x26')](_0x5e5b6d)){_0x58a27e=JSON[a5_0x3a48('0x27')](fsExtra[a5_0x3a48('0x28')](_0x5e5b6d)[a5_0x3a48('0x29')]());}console['log'](a5_0x3a48('0x2a'),_0x58a27e);}});}function sendFaceResult(_0x302cbd){const _0x57274a=new net[(a5_0x3a48('0x2b'))]();try{_0x57274a['connect'](0x2af8,a5_0x3a48('0x2c'),function(){console[a5_0x3a48('0x20')]('Connected');_0x57274a[a5_0x3a48('0x2d')](_0x302cbd+a5_0x3a48('0x2e'));});_0x57274a['on'](a5_0x3a48('0x2f'),function(_0x50b3f6){console[a5_0x3a48('0x20')](a5_0x3a48('0x30')+_0x50b3f6);_0x57274a[a5_0x3a48('0x31')]();});_0x57274a['on'](a5_0x3a48('0x32'),function(){console[a5_0x3a48('0x20')](a5_0x3a48('0x33'));});}catch(_0x1dd214){console['log'](a5_0x3a48('0x34'),_0x1dd214);}}init();