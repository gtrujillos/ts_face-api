var a5_0x205c=['done','value','then','apply','next','__importStar','__esModule','call','default','face-api.js','net','/Users/admin/Documents/Projects/PassControl/Development/passcontrol.client_app/media/files/','authorized_driver.jpg','current_driver.jpg','faceDetectionNet','../weights','nets','loadFromDisk','faceRecognitionNet','canvas','loadImage','catch','computeFaceDescriptor','detectAllFaces','faceDetectionOptions','round','euclideanDistance','prototype','length','log','(no\x20reference\x20face)','(no\x20query\x20face)','(no\x20match)','(match)','result','/Users/admin/Documents/Projects/PassControl/Development/passcontrol.client_app/media/files/location.txt','existsSync','parse','readFileSync','toString','locationResult:','connect','192.168.0.104','Connected','write','data','Received:\x20','destroy','close','Connection\x20closed','error','throw'];(function(_0x53735a,_0x29794b){var _0x171fdb=function(_0x30d3cc){while(--_0x30d3cc){_0x53735a['push'](_0x53735a['shift']());}};_0x171fdb(++_0x29794b);}(a5_0x205c,0x137));var a5_0x4d4a=function(_0x3b8d00,_0xc2119){_0x3b8d00=_0x3b8d00-0x0;var _0x1588e8=a5_0x205c[_0x3b8d00];return _0x1588e8;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x888274,_0x3e341c,_0x49417f,_0x49420b){function _0x2acd8f(_0x49fd76){return _0x49fd76 instanceof _0x49417f?_0x49fd76:new _0x49417f(function(_0x3dafbf){_0x3dafbf(_0x49fd76);});}return new(_0x49417f||(_0x49417f=Promise))(function(_0x4a2472,_0x4aadac){function _0x27db70(_0xbe8a5f){try{_0x24412d(_0x49420b['next'](_0xbe8a5f));}catch(_0x42a516){_0x4aadac(_0x42a516);}}function _0x38ace8(_0x51ce5c){try{_0x24412d(_0x49420b[a5_0x4d4a('0x0')](_0x51ce5c));}catch(_0x24bc0b){_0x4aadac(_0x24bc0b);}}function _0x24412d(_0x4503a6){_0x4503a6[a5_0x4d4a('0x1')]?_0x4a2472(_0x4503a6[a5_0x4d4a('0x2')]):_0x2acd8f(_0x4503a6[a5_0x4d4a('0x2')])[a5_0x4d4a('0x3')](_0x27db70,_0x38ace8);}_0x24412d((_0x49420b=_0x49420b[a5_0x4d4a('0x4')](_0x888274,_0x3e341c||[]))[a5_0x4d4a('0x5')]());});};var __importStar=this&&this[a5_0x4d4a('0x6')]||function(_0x301930){if(_0x301930&&_0x301930[a5_0x4d4a('0x7')])return _0x301930;var _0x30d0ba={};if(_0x301930!=null)for(var _0x7f8cf2 in _0x301930)if(Object['hasOwnProperty'][a5_0x4d4a('0x8')](_0x301930,_0x7f8cf2))_0x30d0ba[_0x7f8cf2]=_0x301930[_0x7f8cf2];_0x30d0ba[a5_0x4d4a('0x9')]=_0x301930;return _0x30d0ba;};Object['defineProperty'](exports,a5_0x4d4a('0x7'),{'value':!![]});const faceapi=__importStar(require(a5_0x4d4a('0xa')));const commons_1=require('../commons');const net=require(a5_0x4d4a('0xb'));const fsExtra=require('fs-extra');const folder=a5_0x4d4a('0xc');const REFERENCE_IMAGE=folder+a5_0x4d4a('0xd');const QUERY_IMAGE=folder+a5_0x4d4a('0xe');const threshold=0.6;let previousResult='0';let countResult=0x0;function init(){return __awaiter(this,void 0x0,void 0x0,function*(){yield commons_1[a5_0x4d4a('0xf')]['loadFromDisk'](a5_0x4d4a('0x10'));yield faceapi[a5_0x4d4a('0x11')]['faceLandmark68Net'][a5_0x4d4a('0x12')]('../weights');yield faceapi[a5_0x4d4a('0x11')][a5_0x4d4a('0x13')][a5_0x4d4a('0x12')](a5_0x4d4a('0x10'));setInterval(()=>{run();},0x3e8);});}function run(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x527750=yield commons_1[a5_0x4d4a('0x14')][a5_0x4d4a('0x15')](REFERENCE_IMAGE)[a5_0x4d4a('0x16')](function(_0x14f178){});const _0x1eba85=yield faceapi[a5_0x4d4a('0x17')](_0x527750);const _0x39b447=yield faceapi[a5_0x4d4a('0x18')](_0x527750,commons_1[a5_0x4d4a('0x19')]);const _0x43e664=yield commons_1[a5_0x4d4a('0x14')]['loadImage'](QUERY_IMAGE)['catch'](function(_0x4b72b0){});const _0x3ff8df=yield faceapi[a5_0x4d4a('0x17')](_0x43e664);const _0x43bca1=yield faceapi[a5_0x4d4a('0x18')](_0x43e664,commons_1[a5_0x4d4a('0x19')]);const _0x577834=faceapi['utils'][a5_0x4d4a('0x1a')](faceapi[a5_0x4d4a('0x1b')](Array[a5_0x4d4a('0x1c')]['slice'][a5_0x4d4a('0x8')](_0x1eba85),Array[a5_0x4d4a('0x1c')]['slice'][a5_0x4d4a('0x8')](_0x3ff8df)));let _0x348e65='0';if(_0x39b447[a5_0x4d4a('0x1d')]==0x0){console[a5_0x4d4a('0x1e')](a5_0x4d4a('0x1f'),new Date(),_0x577834);}else if(_0x43bca1[a5_0x4d4a('0x1d')]==0x0){console[a5_0x4d4a('0x1e')](a5_0x4d4a('0x20'),new Date(),_0x577834);}else{if(_0x577834>threshold){console['log'](a5_0x4d4a('0x21'),new Date(),_0x577834);}else{console['log'](a5_0x4d4a('0x22'),new Date(),_0x577834);_0x348e65='1';}}if(_0x348e65==previousResult){countResult++;}else{countResult=0x0;}previousResult=_0x348e65;console[a5_0x4d4a('0x1e')](a5_0x4d4a('0x23'),_0x348e65,countResult);if(countResult==0x5){sendFaceResult(_0x348e65);const _0x92cdd8=a5_0x4d4a('0x24');let _0x32bb1a='';if(fsExtra[a5_0x4d4a('0x25')](_0x92cdd8)){_0x32bb1a=JSON[a5_0x4d4a('0x26')](fsExtra[a5_0x4d4a('0x27')](_0x92cdd8)[a5_0x4d4a('0x28')]());}console[a5_0x4d4a('0x1e')](a5_0x4d4a('0x29'),_0x32bb1a);}});}function sendFaceResult(_0x1567ce){const _0x2d4e1c=new net['Socket']();try{_0x2d4e1c[a5_0x4d4a('0x2a')](0x2af8,a5_0x4d4a('0x2b'),function(){console[a5_0x4d4a('0x1e')](a5_0x4d4a('0x2c'));_0x2d4e1c[a5_0x4d4a('0x2d')](_0x1567ce+'<EOF>');});_0x2d4e1c['on'](a5_0x4d4a('0x2e'),function(_0x4586c2){console[a5_0x4d4a('0x1e')](a5_0x4d4a('0x2f')+_0x4586c2);_0x2d4e1c[a5_0x4d4a('0x30')]();});_0x2d4e1c['on'](a5_0x4d4a('0x31'),function(){console[a5_0x4d4a('0x1e')](a5_0x4d4a('0x32'));});}catch(_0x4a15bf){console[a5_0x4d4a('0x1e')](a5_0x4d4a('0x33'),_0x4a15bf);}}init();